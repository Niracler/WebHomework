<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>
        Niracler's Blog
    </title>
    <link rel="stylesheet" type="text/css" href="css/article_base.css"/>


</head>
<body>

<!--导航栏-->
<div id="nav">
    <ul class="nav">
        <li><a href="home.html">首页</a></li>
        <li><a href="blog.html">博客</a></li>
        <li><a href="aboutme.html">关于这个项目</a></li>
    </ul>
</div>


<div class="main">
    <div class="primary">
        <h3>
            基于Linux的教学资源服务器构建
        </h3>
        <p>
        <h3>先是关于几点注意</h3>
        <ul>
            <li>本人是在阿里云服务器上搭建的教学资源服务器，若有不适合的地方，请酌情修改，或直接来问我。</li>
            <li>我这里的所有命令都是没有sudo的，因为我就是root用户。有需要自己加。</li>
            <li><a href="https://www.jianshu.com/p/43b7e6f069f9">zsh 和 fish 安装与使用</a>，工欲善其事,必先利其器</li>
        </ul>
        <h3>这里开始是ftp搭建过程</h3>
        <p><strong>1. Proftpd安装</strong></p>
        <pre class="codehilite"><code class="language-bash">$ apt-get update    # 更新包信息
$ apt-get upgrade  # 升级
$ apt-get install proftpd # 安装proftp</code></pre>


        <p><img alt=""
                src="http://upload-images.jianshu.io/upload_images/4781155-89214869b66827aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
        </p>
        <p>选择“standalone”
            查看proftpd状态</p>
        <pre class="codehilite"><code class="language-shell">$ /etc/init.d/proftpd status</code></pre>


        <p><strong>2. 编辑配置文件</strong></p>
        <pre class="codehilite"><code class="language-shell">$ vim /etc/proftpd/proftpd.conf</code></pre>


        <p><strong><a href="https://www.jianshu.com/p/e1546998c254">文件内容</a></strong></p>
        <p><strong>3. 重启服务器</strong></p>
        <pre class="codehilite"><code class="language-shell">$ /etc/init.d/proftpd restart</code></pre>


        <p><strong>4. Ubuntu系统配置nologin</strong>
            这步是为了防止ftp用户用终端登录</p>
        <pre class="codehilite"><code class="language-shell">$ vim /etc/shells</code></pre>


        <p>最后一行增加/usr/sbin/nologin</p>
        <p><strong>5. 创建用户组</strong></p>
        <pre class="codehilite"><code class="language-shell">$ groupadd student
$ groupadd teacher</code></pre>


        <p><strong>6. 创建账号</strong></p>
        <pre class="codehilite"><code class="language-shell"># 创建用户
$ useradd -m fuckhu -g teacher -s /usr/sbin/nologin
$ useradd fuckhus -g student -s /usr/sbin/nologin -d /home/fuckhu/

#设置账户密码
$ echo -e &quot;fuckhu:123&quot; | sudo chpasswd
$ echo -e &quot;fuckhus:123&quot; | sudo chpasswd</code></pre>


        <p><strong>7. 创建目录</strong></p>
        <pre class="codehilite"><code class="language-shell">$ cd /home/fuckhu/
$ mkdir 学生作业
$ mkdir 资源共享

# 设置文件所属组和所属用户
$ chown fuckhu 学生作业/
$ chown :teacher 学生作业/
$ chown fuckhu 资源共享/
$ chown :teacher 资源共享/

# 给学生加个写作业的权限
$ chmod o+w 学生作业/</code></pre>


        <p>教师私人账号功能测试</p>
        <p><img alt=""
                src="http://upload-images.jianshu.io/upload_images/4781155-261b0b46cf6fd1ee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
        </p>
        <p>教师公开账号功能测试</p>
        <p><img alt=""
                src="http://upload-images.jianshu.io/upload_images/4781155-7266590cb2c88b49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
        </p>
        <p>大家可以自己<a href="ftp://niracler.com">试试</a>
            <a href="https://bbs.aliyun.com/read/323533.html?page=e">win的用户注意</a></p>
        <h3>HTTP服务器安装与配置</h3>
        <p><strong>1. 软件安装</strong></p>
        <pre class="codehilite"><code class="language-shell">$ apt-get update
$ apt-get install apache2
$ apt-get install apache2-doc</code></pre>


        <p><strong>2. 服务器配置</strong></p>
        <pre class="codehilite"><code class="language-shell">$ cd /var/www/html/
$ rm index.html  # 删除原有的index文件
$ ln -s /home/fuckhu/资源共享/ fuckfu # 建立软连接</code></pre>


        <p><img alt=""
                src="http://upload-images.jianshu.io/upload_images/4781155-a551097a9b53090f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
        </p>
        <p>然后直接浏览器用你们的ip去访问吧。</p>
        <h3>Samba服务器安装与配置</h3>
        <p><strong>1. 软件安装</strong></p>
        <pre class="codehilite"><code class="language-shell">$ apt-get install libtalloc2
$ apt-get install samba</code></pre>


        <p><strong>2. 系统用户设置 Samba 独立的登录密码:</strong></p>
        <pre class="codehilite"><code
                class="language-shell">$ echo -e &quot;123\n123&quot; | smbpasswd -a -s fuckhu</code></pre>


        <p>添加samba用户帐号，smbpasswd -a -s fuckhu 是静默方式添加samba帐号，echo -e "123\n123" 是两次输出密码 123，中间输出回车符 \n</p>
        <p><strong>抱歉，外网无法测试。</strong></p>
        <h3>shell管理程序的设计与实现</h3>
        <p>让程序员从一些工作中解脱出来，让你<a href="">不必重复你自己</a></p>
        <p>文件namefile.txt(请不要有多余的换行与空格)</p>
        <pre class="codehilite"><code>zengjinping
sundawei
lishaoming
liuxixian
jiajihong
fengfuye
yujinchang
gaoyanqun</code></pre>


        <p>文件creat.sh
            参考代码</p>
        <pre class="codehilite"><code class="language-shell">#!/bin/bash
cat namefile.txt |while read name
do useradd -m $name -g teacher -s /usr/sbin/nologin
useradd ${name}s -g student -s /usr/sbin/nologin -d /home/$name/
echo -e &quot;$name:123&quot; | sudo chpasswd
echo -e &quot;${name}s:123&quot; | sudo chpasswd
cd /home/$name/
mkdir 学生作业
mkdir 资源共享
chown $name 学生作业/
chown :teacher 学生作业/
chown $name 资源共享/
chown :teacher 资源共享/
chmod o+w 学生作业/
cd /var/www/html/
ln -s /home/$name/资源共享/ $name
echo -e &quot;123\n123&quot; | smbpasswd -a -s $name
done</code></pre>


        <pre class="codehilite"><code class="language-shell">$ sudo bash creat.sh ##执行</code></pre>


        <p><img alt=""
                src="http://upload-images.jianshu.io/upload_images/4781155-e1132b897ec96c89.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
        </p>
        <h3>在此过程我所参考过的内容</h3>
        <ul>
            <li><a href="https://wenku.baidu.com/view/0546c4215901020207409c8c.html">黄培灿老师的方法</a></li>
            <li><a href="http://blog.fens.me/linux-ftp-proftpd/">Proftpd快速搭建FTP服务器</a></li>
            <li>
                <a href="https://www.cnblogs.com/panblack/p/samba_batch_adding_users.html">Centos6配置samba服务器并批量添加用户和文件夹</a>
            </li>
            <li><a href="http://bbs.51cto.com/thread-1081649-1-1.html">Linux 下批量创建用户(shell 命令)</a></li>
            <li><a href="http://www.linuxidc.com/Linux/2014-12/111056.htm">Linux ln命令 - 建立文件/目录链接</a></li>
            <li>老师的讲义。</li>
        </ul>
        </p>
    </div>
    <div class="secondary">
        <div class="login">
            <h3>LOGIN</h3>
            <form action="#" method="post" class="biaodan">
                <table class="content">
                    <tr>
                        <td class="left">Username：</td>
                        <td><input type="text" class="txt01"/></td>
                    </tr>
                    <tr>
                        <td class="left">Password：</td>
                        <td><input type="text" class="txt01"/></td>
                    </tr>
                    <tr>
                        <td class="left">Adress：</td>
                        <td>
                            <select class="course">
                                <option>where</option>
                                <option>地球</option>
                                <option>月球</option>
                                <option>火星</option>
                            </select>
                        </td>
                    </tr>
                </table>
                <input type="submit" name="commit" value="登录" class="sign-in-button" data-disable-with="登录">
            </form>
        </div>
        <div class="calendar">
            <div id="frame" class="frame_low">
                <div class="top">
                    <span class="left" onclick="preMonth()"></span>
                    <span class="right" onclick="postMonth()"></span>
                    <h2></h2>
                </div>
                <ul id="week">
                    <li>Sun</li>
                    <li>Mon</li>
                    <li>Tue</li>
                    <li>Wed</li>
                    <li>The</li>
                    <li>Fri</li>
                    <li>Sat</li>
                </ul>

                <div id="data">
                    <div class="firstLine">
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                    </div>
                    <div class="Line">
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                    </div>
                    <div class="Line">
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                    </div>
                    <div class="Line">
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                    </div>
                    <div class="Line">
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                    </div>
                    <div class="lastLine">
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                    </div>

                </div>
            </div>
        </div>
        <div class="slides">
            <img class="mySlides" src="images/01.jpg">
            <img class="mySlides" src="images/02.jpg">
            <button onclick="plusDivs(-1)">&#10094;</button>
            <button onclick="plusDivs(+1)">&#10095;</button>
        </div>
    </div>
</div>
<!--footer-->
<script type="text/javascript" src="js/calendar.js"></script>
<script type="text/javascript" src="js/blog.js"></script>


</body>
</html>
